"""Textur-Mapping für Minecraft Blöcke"""

TEXTURES = {
    # --- Natur & Erde ---
    "grass_block": "grass_block_side",
    "dirt": "dirt",
    "coarse_dirt": "coarse_dirt",
    "podzol": "podzol_side",
    "rooted_dirt": "rooted_dirt",
    "mycelium": "mycelium_side",
    "grass_path": "dirt_path_side",
    "mud": "mud",
    "clay": "clay",
    "gravel": "gravel",
    "sand": "sand",
    "red_sand": "red_sand",
    "ice": "ice",
    "packed_ice": "packed_ice",
    "blue_ice": "blue_ice",
    "snow_block": "snow",
    "moss_block": "moss_block",
    "calcite": "calcite",
    "tuff": "tuff",
    "dripstone_block": "dripstone_block",

    # --- Blätter (Leaves) ---
    "oak_leaves": "oak_leaves",
    "spruce_leaves": "spruce_leaves",
    "birch_leaves": "birch_leaves",
    "jungle_leaves": "jungle_leaves",
    "acacia_leaves": "acacia_leaves",
    "dark_oak_leaves": "dark_oak_leaves",
    "mangrove_leaves": "mangrove_leaves",
    "cherry_leaves": "cherry_leaves",
    "azalea_leaves": "azalea_leaves",
    "flowering_azalea_leaves": "flowering_azalea_leaves",
    "leaves": "oak_leaves",

    # --- Steine ---
    "stone": "stone",
    "cobblestone": "cobblestone",
    "mossy_cobblestone": "mossy_cobblestone",
    "smooth_stone": "smooth_stone",
    "stone_bricks": "stone_bricks",
    "mossy_stone_bricks": "mossy_stone_bricks",
    "cracked_stone_bricks": "cracked_stone_bricks",
    "chiseled_stone_bricks": "chiseled_stone_bricks",
    
    "andesite": "andesite",
    "polished_andesite": "polished_andesite",
    "diorite": "diorite",
    "polished_diorite": "polished_diorite",
    "granite": "granite",
    "polished_granite": "polished_granite",
    
    "deepslate": "deepslate",
    "cobbled_deepslate": "cobbled_deepslate",
    "polished_deepslate": "polished_deepslate",
    "deepslate_bricks": "deepslate_bricks",
    "deepslate_tiles": "deepslate_tiles",
    "chiseled_deepslate": "chiseled_deepslate",
    "reinforced_deepslate": "reinforced_deepslate_side",
    
    "brick_block": "bricks",
    "mud_bricks": "mud_bricks",
    
    # --- Erze & Mineralblöcke ---
    "coal_ore": "coal_ore",
    "deepslate_coal_ore": "deepslate_coal_ore",
    "iron_ore": "iron_ore",
    "deepslate_iron_ore": "deepslate_iron_ore",
    "copper_ore": "copper_ore",
    "deepslate_copper_ore": "deepslate_copper_ore",
    "gold_ore": "gold_ore",
    "deepslate_gold_ore": "deepslate_gold_ore",
    "redstone_ore": "redstone_ore",
    "deepslate_redstone_ore": "deepslate_redstone_ore",
    "emerald_ore": "emerald_ore",
    "deepslate_emerald_ore": "deepslate_emerald_ore",
    "lapis_ore": "lapis_ore",
    "deepslate_lapis_ore": "deepslate_lapis_ore",
    "diamond_ore": "diamond_ore",
    "deepslate_diamond_ore": "deepslate_diamond_ore",
    "nether_gold_ore": "nether_gold_ore",
    "nether_quartz_ore": "nether_quartz_ore",
    
    "coal_block": "coal_block",
    "iron_block": "iron_block",
    "gold_block": "gold_block",
    "diamond_block": "diamond_block",
    "emerald_block": "emerald_block",
    "lapis_block": "lapis_block",
    "redstone_block": "redstone_block",
    "copper_block": "copper_block",
    "raw_iron_block": "raw_iron_block",
    "raw_gold_block": "raw_gold_block",
    "raw_copper_block": "raw_copper_block",
    "amethyst_block": "amethyst_block",
    "budding_amethyst": "budding_amethyst",

    # --- Hölzer (Planks & Logs) ---
    "oak_planks": "oak_planks",
    "spruce_planks": "spruce_planks",
    "birch_planks": "birch_planks",
    "jungle_planks": "jungle_planks",
    "acacia_planks": "acacia_planks",
    "dark_oak_planks": "dark_oak_planks",
    "mangrove_planks": "mangrove_planks",
    "cherry_planks": "cherry_planks",
    "bamboo_planks": "bamboo_planks",
    "crimson_planks": "crimson_planks",
    "warped_planks": "warped_planks",

    "oak_log": "oak_log",
    "spruce_log": "spruce_log",
    "birch_log": "birch_log",
    "jungle_log": "jungle_log",
    "acacia_log": "acacia_log",
    "dark_oak_log": "dark_oak_log",
    "mangrove_log": "mangrove_log",
    "cherry_log": "cherry_log",
    "crimson_stem": "crimson_stem",
    "warped_stem": "warped_stem",
    "bamboo_block": "bamboo_block",
    "stripped_oak_log": "stripped_oak_log",
    "stripped_spruce_log": "stripped_spruce_log",
    "stripped_birch_log": "stripped_birch_log",
    "stripped_jungle_log": "stripped_jungle_log",
    "stripped_acacia_log": "stripped_acacia_log",
    "stripped_dark_oak_log": "stripped_dark_oak_log",
    "stripped_mangrove_log": "stripped_mangrove_log",
    "stripped_cherry_log": "stripped_cherry_log",
    "stripped_crimson_stem": "stripped_crimson_stem",
    "stripped_warped_stem": "stripped_warped_stem",
    "stripped_bamboo_block": "stripped_bamboo_block",

    # --- Wolle (Wool) ---
    "white_wool": "white_wool",
    "orange_wool": "orange_wool",
    "magenta_wool": "magenta_wool",
    "light_blue_wool": "light_blue_wool",
    "yellow_wool": "yellow_wool",
    "lime_wool": "lime_wool",
    "pink_wool": "pink_wool",
    "gray_wool": "gray_wool",
    "light_gray_wool": "light_gray_wool",
    "cyan_wool": "cyan_wool",
    "purple_wool": "purple_wool",
    "blue_wool": "blue_wool",
    "brown_wool": "brown_wool",
    "green_wool": "green_wool",
    "red_wool": "red_wool",
    "black_wool": "black_wool",

    # --- Teppiche (Carpets) ---
    "white_carpet": "white_wool",
    "orange_carpet": "orange_wool",
    "magenta_carpet": "magenta_wool",
    "light_blue_carpet": "light_blue_wool",
    "yellow_carpet": "yellow_wool",
    "lime_carpet": "lime_wool",
    "pink_carpet": "pink_wool",
    "gray_carpet": "gray_wool",
    "light_gray_carpet": "light_gray_wool",
    "cyan_carpet": "cyan_wool",
    "purple_carpet": "purple_wool",
    "blue_carpet": "blue_wool",
    "brown_carpet": "brown_wool",
    "green_carpet": "green_wool",
    "red_carpet": "red_wool",
    "black_carpet": "black_wool",

    # --- Wände (Walls) ---
    "cobblestone_wall": "cobblestone",
    "mossy_cobblestone_wall": "mossy_cobblestone",
    "stone_brick_wall": "stone_bricks",
    "mossy_stone_brick_wall": "mossy_stone_bricks",
    "andesite_wall": "andesite",
    "polished_andesite_wall": "polished_andesite",
    "diorite_wall": "diorite",
    "polished_diorite_wall": "polished_diorite",
    "granite_wall": "granite",
    "polished_granite_wall": "polished_granite",
    "sandstone_wall": "sandstone",
    "red_sandstone_wall": "red_sandstone",
    "brick_wall": "bricks",
    "prismarine_wall": "prismarine",
    "red_nether_brick_wall": "red_nether_bricks",
    "nether_brick_wall": "nether_bricks",
    "end_stone_brick_wall": "end_stone_bricks",
    "deepslate_brick_wall": "deepslate_bricks",
    "deepslate_tile_wall": "deepslate_tiles",
    "polished_deepslate_wall": "polished_deepslate",
    "cobbled_deepslate_wall": "cobbled_deepslate",
    "blackstone_wall": "blackstone",
    "polished_blackstone_wall": "polished_blackstone",
    "polished_blackstone_brick_wall": "polished_blackstone_bricks",

    # --- Beton (Concrete) ---
    "white_concrete": "white_concrete",
    "orange_concrete": "orange_concrete",
    "magenta_concrete": "magenta_concrete",
    "light_blue_concrete": "light_blue_concrete",
    "yellow_concrete": "yellow_concrete",
    "lime_concrete": "lime_concrete",
    "pink_concrete": "pink_concrete",
    "gray_concrete": "gray_concrete",
    "light_gray_concrete": "light_gray_concrete",
    "cyan_concrete": "cyan_concrete",
    "purple_concrete": "purple_concrete",
    "blue_concrete": "blue_concrete",
    "brown_concrete": "brown_concrete",
    "green_concrete": "green_concrete",
    "red_concrete": "red_concrete",
    "black_concrete": "black_concrete",

    # --- Trockenbeton (Concrete Powder) ---
    "white_concrete_powder": "white_concrete_powder",
    "orange_concrete_powder": "orange_concrete_powder",
    "magenta_concrete_powder": "magenta_concrete_powder",
    "light_blue_concrete_powder": "light_blue_concrete_powder",
    "yellow_concrete_powder": "yellow_concrete_powder",
    "lime_concrete_powder": "lime_concrete_powder",
    "pink_concrete_powder": "pink_concrete_powder",
    "gray_concrete_powder": "gray_concrete_powder",
    "light_gray_concrete_powder": "light_gray_concrete_powder",
    "cyan_concrete_powder": "cyan_concrete_powder",
    "purple_concrete_powder": "purple_concrete_powder",
    "blue_concrete_powder": "blue_concrete_powder",
    "brown_concrete_powder": "brown_concrete_powder",
    "green_concrete_powder": "green_concrete_powder",
    "red_concrete_powder": "red_concrete_powder",
    "black_concrete_powder": "black_concrete_powder",

    # --- Keramik (Terracotta) ---
    "terracotta": "terracotta",
    "white_terracotta": "white_terracotta",
    "orange_terracotta": "orange_terracotta",
    "magenta_terracotta": "magenta_terracotta",
    "light_blue_terracotta": "light_blue_terracotta",
    "yellow_terracotta": "yellow_terracotta",
    "lime_terracotta": "lime_terracotta",
    "pink_terracotta": "pink_terracotta",
    "gray_terracotta": "gray_terracotta",
    "light_gray_terracotta": "light_gray_terracotta",
    "cyan_terracotta": "cyan_terracotta",
    "purple_terracotta": "purple_terracotta",
    "blue_terracotta": "blue_terracotta",
    "brown_terracotta": "brown_terracotta",
    "green_terracotta": "green_terracotta",
    "red_terracotta": "red_terracotta",
    "black_terracotta": "black_terracotta",

    # --- Nether & End ---
    "netherrack": "netherrack",
    "crimson_nylium": "crimson_nylium_side",
    "warped_nylium": "warped_nylium_side",
    "soul_sand": "soul_sand",
    "soul_soil": "soul_soil",
    "basalt": "basalt_side",
    "polished_basalt": "polished_basalt_side",
    "smooth_basalt": "smooth_basalt",
    "blackstone": "blackstone",
    "polished_blackstone": "polished_blackstone",
    "polished_blackstone_bricks": "polished_blackstone_bricks",
    "gilded_blackstone": "gilded_blackstone",
    "nether_bricks": "nether_bricks",
    "red_nether_bricks": "red_nether_bricks",
    "cracked_nether_bricks": "cracked_nether_bricks",
    "chiseled_nether_bricks": "chiseled_nether_bricks",
    "end_stone": "end_stone",
    "end_stone_bricks": "end_stone_bricks",
    "purpur_block": "purpur_block",
    "purpur_pillar": "purpur_pillar",
    "obsidian": "obsidian",
    "crying_obsidian": "crying_obsidian",
    "glowstone": "glowstone",
    "shroomlight": "shroomlight",
    "sea_lantern": "sea_lantern",
    "magma_block": "magma",

    # --- Sandstein & Quarz ---
    "sandstone": "sandstone",
    "chiseled_sandstone": "chiseled_sandstone",
    "cut_sandstone": "cut_sandstone",
    "red_sandstone": "red_sandstone",
    "chiseled_red_sandstone": "chiseled_red_sandstone",
    "cut_red_sandstone": "cut_red_sandstone",
    "quartz_block": "quartz_block_side",
    "chiseled_quartz_block": "chiseled_quartz_block",
    "quartz_bricks": "quartz_bricks",
    "quartz_pillar": "quartz_pillar",
    
    # --- Ozean ---
    "prismarine": "prismarine",
    "prismarine_bricks": "prismarine_bricks",
    "dark_prismarine": "dark_prismarine",
    "sponge": "sponge",
    "wet_sponge": "wet_sponge",

    # --- Funktionale Blöcke ---
    "crafting_table": "crafting_table_front",
    "furnace": "furnace_front",
    "dispenser": "dispenser_front",
    "dropper": "dropper_front",
    "observer": "observer_front",
    "piston": "piston_side",
    "sticky_piston": "piston_side",
    "tnt": "tnt_side",
    "bookshelf": "bookshelf",
    "chiseled_bookshelf": "chiseled_bookshelf_side",
    "pumpkin": "pumpkin_side",
    "carved_pumpkin": "carved_pumpkin",
    "jack_o_lantern": "jack_o_lantern",
    "melon": "melon_side",
    "hay_block": "hay_block_side",
    "target": "target_side",
    "honeycomb_block": "honeycomb_block",
    "slime_block": "slime_block",
    "honey_block": "honey_block_side",
    "bedrock": "bedrock",
    "sculk": "sculk",
    "sculk_catalyst": "sculk_catalyst_side",
    "sculk_shrieker": "sculk_shrieker_side",
    
    # --- Zusätzliche funktionale Blöcke ---
    "chest": "barrel_side",
    "trapped_chest": "barrel_side",
    "barrel": "barrel_side",
    "shulker_box_generic": "shulker_box",
    "lantern": "iron_bars",
    "soul_lantern": "iron_bars",
    
    # --- Shulker Boxen ---
    "shulker_box": "shulker_box",
    "white_shulker_box": "white_shulker_box",
    "orange_shulker_box": "orange_shulker_box",
    "magenta_shulker_box": "magenta_shulker_box",
    "light_blue_shulker_box": "light_blue_shulker_box",
    "yellow_shulker_box": "yellow_shulker_box",
    "lime_shulker_box": "lime_shulker_box",
    "pink_shulker_box": "pink_shulker_box",
    "gray_shulker_box": "gray_shulker_box",
    "light_gray_shulker_box": "light_gray_shulker_box",
    "cyan_shulker_box": "cyan_shulker_box",
    "purple_shulker_box": "purple_shulker_box",
    "blue_shulker_box": "blue_shulker_box",
    "brown_shulker_box": "brown_shulker_box",
    "green_shulker_box": "green_shulker_box",
    "red_shulker_box": "red_shulker_box",
    "black_shulker_box": "black_shulker_box",

    # --- Gitter & Glas ---
    "bars": "iron_bars",
    "glass_pane": "glass",
    "tinted_glass": "tinted_glass",
    
    # --- Stained Glass ---
    "white_stained_glass": "white_stained_glass",
    "orange_stained_glass": "orange_stained_glass",
    "magenta_stained_glass": "magenta_stained_glass",
    "light_blue_stained_glass": "light_blue_stained_glass",
    "yellow_stained_glass": "yellow_stained_glass",
    "lime_stained_glass": "lime_stained_glass",
    "pink_stained_glass": "pink_stained_glass",
    "gray_stained_glass": "gray_stained_glass",
    "light_gray_stained_glass": "light_gray_stained_glass",
    "cyan_stained_glass": "cyan_stained_glass",
    "purple_stained_glass": "purple_stained_glass",
    "blue_stained_glass": "blue_stained_glass",
    "brown_stained_glass": "brown_stained_glass",
    "green_stained_glass": "green_stained_glass",
    "red_stained_glass": "red_stained_glass",
    "black_stained_glass": "black_stained_glass",
    
    # --- Glazed Terracotta ---
    "glazed_terracotta": "white_glazed_terracotta",
    "white_glazed_terracotta": "white_glazed_terracotta",
    "orange_glazed_terracotta": "orange_glazed_terracotta",
    "magenta_glazed_terracotta": "magenta_glazed_terracotta",
    "light_blue_glazed_terracotta": "light_blue_glazed_terracotta",
    "yellow_glazed_terracotta": "yellow_glazed_terracotta",
    "lime_glazed_terracotta": "lime_glazed_terracotta",
    "pink_glazed_terracotta": "pink_glazed_terracotta",
    "gray_glazed_terracotta": "gray_glazed_terracotta",
    "light_gray_glazed_terracotta": "light_gray_glazed_terracotta",
    "cyan_glazed_terracotta": "cyan_glazed_terracotta",
    "purple_glazed_terracotta": "purple_glazed_terracotta",
    "blue_glazed_terracotta": "blue_glazed_terracotta",
    "brown_glazed_terracotta": "brown_glazed_terracotta",
    "green_glazed_terracotta": "green_glazed_terracotta",
    "red_glazed_terracotta": "red_glazed_terracotta",
    "black_glazed_terracotta": "black_glazed_terracotta",
    
    # --- Falltüren ---
    "oak_trapdoor": "oak_trapdoor",
    "spruce_trapdoor": "spruce_trapdoor",
    "birch_trapdoor": "birch_trapdoor",
    "jungle_trapdoor": "jungle_trapdoor",
    "acacia_trapdoor": "acacia_trapdoor",
    "dark_oak_trapdoor": "dark_oak_trapdoor",
    "mangrove_trapdoor": "mangrove_trapdoor",
    "cherry_trapdoor": "cherry_trapdoor",
    "bamboo_trapdoor": "bamboo_trapdoor",
    "crimson_trapdoor": "crimson_trapdoor",
    "warped_trapdoor": "warped_trapdoor",
    "iron_trapdoor": "iron_trapdoor",
    "pale_oak_trapdoor": "pale_oak_trapdoor",
    
    # --- Slabs (zusätzliche) ---
    "smooth_quartz_slab": "quartz_block_side",
    "smooth_sandstone_slab": "sandstone",
    "smooth_red_sandstone_slab": "red_sandstone",
    "polished_tuff_slab": "polished_tuff",
    "tuff_brick_slab": "tuff_bricks",
    "bamboo_mosaic_slab": "bamboo_mosaic",
    "pale_oak_slab": "pale_oak_planks",
    "oxidized_cut_copper_slab": "oxidized_cut_copper",
    
    # --- Stairs (zusätzliche) ---
    "smooth_quartz_stairs": "quartz_block_side",
    "smooth_sandstone_stairs": "sandstone",
    "smooth_red_sandstone_stairs": "red_sandstone",
    "tuff_brick_stairs": "tuff_bricks",
    "waxed_weathered_cut_copper_stairs": "weathered_cut_copper",
    "bamboo_mosaic_stairs": "bamboo_mosaic",
    
    # --- Fences (zusätzliche) ---
    "nether_brick_fence": "nether_bricks",
    "pale_oak_fence": "pale_oak_planks",
    
    # --- Trapdoors (zusätzliche) ---
    "waxed_exposed_copper_trapdoor": "exposed_copper_trapdoor",
    "waxed_weathered_copper_trapdoor": "weathered_copper_trapdoor",
    "waxed_oxidized_copper_trapdoor": "oxidized_copper_trapdoor",
}


def get_texture(block_name):
    """Gibt die passende Textur für einen Block zurück"""
    import logging
    log = logging.getLogger(__name__)
    
    block_name = block_name.replace("minecraft:", "")
    
    # Direkter Match
    if block_name in TEXTURES:
        return TEXTURES[block_name]
    
    special_materials = {
        "brick": "bricks",
        "stone_brick": "stone_bricks",
        "nether_brick": "nether_bricks",
        "deepslate_brick": "deepslate_bricks",
        "deepslate_tile": "deepslate_tiles"
    }
    
    # Generic Fallbacks für bekannte fehlende Block-Typen
    generic_fallbacks = {
        "chest": "barrel_side",
        "trapped_chest": "barrel_side",
        "glazed_terracotta": "white_glazed_terracotta",
    }
    
    # STAIRS Handling
    if block_name.endswith("_stairs"):
        base = block_name.replace("_stairs", "")
        
        # Prüfe spezielle Material-Mappings
        if base in special_materials:
            return special_materials[base]
        
        # Prüfe ob base_planks existiert (für Holz)
        if base + "_planks" in TEXTURES:
            return TEXTURES[base + "_planks"]
        
        # Prüfe direkt den base Namen
        if base in TEXTURES:
            return TEXTURES[base]
        
        # Fallback: Versuche Plural-Form (tile -> tiles)
        if base + "s" in TEXTURES:
            return TEXTURES[base + "s"]
        
        # Generic Fallback für unbekannte Stairs
        log.warning(f"Keine Textur für Stairs '{block_name}' gefunden, nutze generic Fallback")
        return "stone_bricks"
    
    # SLAB Handling
    if block_name.endswith("_slab"):
        base = block_name.replace("_slab", "")
        
        # Prüfe spezielle Material-Mappings
        if base in special_materials:
            return special_materials[base]
        
        # Prüfe ob base_planks existiert (für Holz)
        if base + "_planks" in TEXTURES:
            return TEXTURES[base + "_planks"]
        
        # Prüfe direkt den base Namen
        if base in TEXTURES:
            return TEXTURES[base]
        
        # Fallback: Versuche Plural-Form (tile -> tiles)
        if base + "s" in TEXTURES:
            return TEXTURES[base + "s"]
        
        # Generic Fallback für unbekannte Slabs
        log.warning(f"Keine Textur für Slab '{block_name}' gefunden, nutze generic Fallback")
        return "stone"
    
    # FENCE Handling
    if block_name.endswith("_fence"):
        base = block_name.replace("_fence", "")
        
        # Prüfe ob base_planks existiert (für Holz)
        if base + "_planks" in TEXTURES:
            return TEXTURES[base + "_planks"]
        
        # Prüfe direkt den base Namen
        if base in TEXTURES:
            return TEXTURES[base]
        
        # Generic Fallback für Zäune
        log.warning(f"Keine Textur für Fence '{block_name}' gefunden, nutze generic Fallback")
        return "oak_planks"
    
    # TRAPDOOR Handling
    if block_name.endswith("_trapdoor"):
        base = block_name.replace("_trapdoor", "")
        
        # Prüfe ob base_planks existiert (für Holz)
        if base + "_planks" in TEXTURES:
            return TEXTURES[base + "_planks"]
        
        # Prüfe direkt den base Namen
        if base in TEXTURES:
            return TEXTURES[base]
        
        # Generic Fallback für Falltüren
        log.warning(f"Keine Textur für Trapdoor '{block_name}' gefunden, nutze generic Fallback")
        return "oak_trapdoor"
    
    # WALL Handling (z.B. cobblestone_wall)
    if block_name.endswith("_wall"):
        base = block_name.replace("_wall", "")
        if base in TEXTURES:
            return TEXTURES[base]
        
        # Generic Fallback für Mauern
        log.warning(f"Keine Textur für Wall '{block_name}' gefunden, nutze generic Fallback")
        return "stone_bricks"
    
    # Prüfe Generic Fallbacks
    if block_name in generic_fallbacks:
        fallback = generic_fallbacks[block_name]
        log.warning(f"Keine Textur für '{block_name}' gefunden, nutze Fallback: '{fallback}'")
        if fallback in TEXTURES:
            return TEXTURES[fallback]
        return fallback
    
    # Spezielle Heuristiken für waxed_ und exposed_ Varianten
    if block_name.startswith("waxed_"):
        base = block_name.replace("waxed_", "")
        if base in TEXTURES:
            tex = TEXTURES[base]
            log.warning(f"Verwende Base-Textur für '{block_name}': '{tex}'")
            return tex
    
    if block_name.startswith("exposed_"):
        base = block_name.replace("exposed_", "")
        if base in TEXTURES:
            return TEXTURES[base]
    
    if block_name.startswith("weathered_"):
        base = block_name.replace("weathered_", "")
        if base in TEXTURES:
            return TEXTURES[base]
    
    if block_name.startswith("oxidized_"):
        base = block_name.replace("oxidized_", "")
        if base in TEXTURES:
            return TEXTURES[base]
    
    # Fallback: Gib den ursprünglichen Namen zurück (wird dann toolsnodraw)
    log.warning(f"Keine Textur für Block '{block_name}' gefunden, wird unsichtbar")
    return block_name